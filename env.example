# ──────────────────────────────────────────────────────────────
# Workflow Runner — Environment Variables
# Copy to .env (or set in your Lambda / deployment config)
# ──────────────────────────────────────────────────────────────

# ── AWS ───────────────────────────────────────────────────────
AWS_REGION=us-east-1

# ── Model defaults ────────────────────────────────────────────
# Bedrock model ID used as the default when a workflow node
# does not specify its own model.
DEFAULT_MODEL_ID=us.anthropic.claude-3-7-sonnet-20250219-v1:0
BEDROCK_MODEL=us.anthropic.claude-3-5-sonnet-20241022-v2:0

# ── Amplify / AppSync ─────────────────────────────────────────
# GraphQL endpoint for the Amplify Data layer (AppSync).
# Required at runtime when the full data layer is active.
AMPLIFY_DATA_GRAPHQL_ENDPOINT=https://<appsync-id>.appsync-api.<region>.amazonaws.com/graphql
AMPLIFY_DATA_REGION=us-east-1

# ── Prompt engine ─────────────────────────────────────────────
USE_NEW_PROMPT_ENGINE=true

# ── Prompt archiving (S3) ────────────────────────────────────
# Set to "1" to enable writing prompt archives to S3.
PROMPT_ARCHIVE=0
PROMPT_ARCHIVE_BUCKET=my-prompt-archive-bucket
PROMPT_ARCHIVE_MAX_LINES=8
PROMPT_ARCHIVE_MAX_CHARS=1500
# Set to "1" to redact PII (emails, phone numbers) before archiving.
PROMPT_ARCHIVE_REDACT=0

# ── Prompt content storage (S3 + KMS) ────────────────────────
# S3 bucket for versioned prompt content managed by the prompt engine.
STORAGE_BUCKET_NAME=my-prompt-content-bucket
# KMS key for server-side encryption of prompt content in S3.
PROMPT_CONTENT_KMS_KEY_ID=arn:aws:kms:us-east-1:123456789012:key/example-key-id
PROMPT_CONTENT_KMS_KEY_ARN=arn:aws:kms:us-east-1:123456789012:key/example-key-id

# ── Prompt logging / sampling ─────────────────────────────────
# Fraction of prompts to log (0 = none, 1 = all).
PROMPT_LOG_SAMPLE_RATE=0
PROMPT_LOG_MAX_CHARS=2000

# ── Third-party API keys ─────────────────────────────────────
# Only required if your workflows use the corresponding provider.
OPENAI_API_KEY=sk-...
PINECONE_API_KEY=pcsk_...
PINECONE_INDEX_NAME=my-index

# ── Cost controls (TokenBudget) ───────────────────────────────
# Per-request spending limit (USD). Requests exceeding this are rejected.
DEFAULT_REQUEST_COST_CAP_USD=5.00
# Absolute token limit per request.
DEFAULT_TOKEN_CAP=100000
# Cost threshold (USD) that triggers an ops alert.
EMERGENCY_COST_THRESHOLD_USD=25.00
